# Payment Sheet Form

## Attributes

| NAME                         | TYPE                                                                         | REQUIRED | DEFAULT      | DESCRIPTION                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ---------------------------- | ---------------------------------------------------------------------------- | -------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| amount                       | string                                                                       | ✅        |              | The amount of the payment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| currency                     | string                                                                       | ✅        |              | The currency for the amount value.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| paymentMethodSet             | PaymentMethodSetData                                                         | ✅        |              | The set of payment methods to attempt to render in the payment sheet.<br>**Note**: Do not render the component until this value is set. This can be retrieved for a given payment method set object name with [https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_payments_payment_method_sets.htm](https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_payments_payment_method_sets.htm)                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| savedPaymentMethods          | SavedPaymentMethod[]                                                         |          |              | The set of saved payment methods to render in the payment sheet. This can be retrieved for a given merchant account id and user account id with [https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_payments_saved_payment_methods.htm](https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_payments_saved_payment_methods.htm)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| paymentRedirectReturnUrl     | string                                                                       |          |              | The URL of the page that payers will be redirected back to after authorizing a payment with a payment method that directs them away from the source site. Required for Afterpay/Clearpay, Bancontact, EPS, Ideal and Klarna. The following parameters will be appended to the return URL and can be used to determine whether payment was successful and proceed.<br><br>payment_intent<br>uuid<br>gatewayId<br>billingName<br>billingEmail<br>billingPhone<br>billingLine1<br>billingLine2<br>billingCity<br>billingState<br>billingPostalCode<br>billingCountry<br>redirectResult<br>paymentMethodType<br>isManualCapture                                                                                                                                                                                                                                                                                        |
| useManualCapture             | boolean                                                                      |          | FALSE        | If false, the payment gateway automatically captures funds when the customer authorizes the payment.<br>If true, the payment gateway places a hold on the funds when the customer authorizes the payment, but don’t capture the funds until later.<br><br>Only somepayment methods support manual capture:<br>Affirm<br>Afterpay/Clearpay<br>Klarna<br>Cards (Includes Google Pay and Apple Pay)<br>Link                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| sepaDebitMandate             | string                                                                       |          |              | Use this field to customize the text of the SEPA mandate. The mandate is a customer authorization that lets merchants take payments using SEPA Debit. If you leave this field blank, the default text is used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| maximumInitialPaymentMethods | number                                                                       |          | 3            | The number of payment methods to display on initial render. Any additional payment methods will be available by clicking a "View All" button.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| enforceSavedPaymentMethod    | boolean                                                                      |          | FALSE        | Enforces saving the payment method, regardless of the 'Save for Future Usage' checkbox.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| enableSavedPaymentMethods    | boolean                                                                      |          | FALSE        | If true, users have the ability to save a payment method and existing saved payment methods will be rendered.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| labels                       | { [key: string]: string }                                                    |          |              | Custom labels to use in the payment sheet component. Available label variables and defaults can be found here: [https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/Labels.html](https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/Labels.html)                                                                                                                                                      |
| emptyStateTitle              | string                                                                       |          | empty string | Label to use for the title on the empty state that is displayed if payment methods aren't yet rendered or fail to render.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| emptyStateDescription        | string                                                                       |          | empty string | Label to use for the description on the empty state that is displayed if payment methods aren't yet rendered or fail to render.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| createIntentFunction         | (paymentData?: Record<string, unknown>) => Promise<Record<string, unknown>>; |          |              | Function to use to create a payment intent for a given amount & currency that will be confirmed. See: [https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#createIntentFunction](https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#createIntentFunction). Output should match: [https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_responses_payments_payment_intents_output.htm](https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_responses_payments_payment_intents_output.htm) Most implementations should use [https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_payments_payment_intents.htm](https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_payments_payment_intents.htm) |


## Methods

| NAME            | ARGUMENTS                                                                                                                                                                         | RETURNS                                    | DESCRIPTION                                                                                                                                                                          |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| completePayment | `paymentIntentCreationFn: (paymentData?: Record<string, unknown>) => Promise<Record<string, unknown>>,<br>billingDetails?: BillingDetails,<br>shippingDetails?: ShippingDetails,` | Promise<SalesforcePaymentsPaymentResponse> | Creates a payment intent using the provided paymentIntentCreationFn and authorizes it. Call this function when the user presses some button on your application to complete payment. |

## Events

| NAME                  | DETAIL                                                                                                                                                                                                                               | DESCRIPTION                                                                                                                                     |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| paymentsheetloaded    | `paymentMethodsAvailable`<br>`paymentMethodSelected`                                                                                                                                                                                 | Payment sheet load event. Bubbled when a payment sheet component has finished loading.                                                          |
| paymentmethodselected | [https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:paymentMethodSelected](https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:paymentMethodSelected)     | Payment sheet payment method selected event. Bubbled when the user selects a payment method in the payment sheet.                               |
| paymentinitiated      | `fundingSource<br>addValidation`                                                                                                                                                                                                     | PayPal Buttons click event. Bubbled when a payer has clicked on a PayPal or Venmo button.                                                       |
| paymentcancel         | [https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:sfppaymentbuttoncancel](https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:sfppaymentbuttoncancel)   | Bubbled when a payment has been canceled. Do not rely on the cancel message to be localized and applicable for presentation to the payer.       |
| paymentapproved       | [https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:sfppaymentbuttonapprove](https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:sfppaymentbuttonapprove) | Payment approve event. Bubbled when a payer has approved payment in the payment app.                                                            |
| paymenterrored        | [https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:sfppaymentbuttonerror](https://salesforcecommercecloud.github.io/payments-sdk-doc/v4.0.0/html/global.html#event:sfppaymentbuttonerror)     | Bubbled when a payment has encountered an error. Do not rely on the error message to be localized and applicable for presentation to the payer. |